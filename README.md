# RU→EN / RU→RU Transcriber (OpenAI)

Этот Python-скрипт предоставляет удобный инструмент для транскрибации русской речи в текст с использованием OpenAI API. Он поддерживает как прямое распознавание русской речи, так и перевод с русской речи на английский с возможностью стилизации. Скрипт работает в фоновом режиме, активируется глобальной горячей клавишей и имеет простой графический интерфейс для настройки.

## Особенности

*   **Голосовое управление:** Активация записи и остановка по глобальной горячей клавише (Ctrl+Shift+R).
*   **Распознавание речи (STT):** Использует модели OpenAI (например, `gpt-4o-mini-transcribe`, `gpt-4o-transcribe`) для высококачественного распознавания русской речи.
*   **Перевод и стилизация:** Возможность перевода распознанного русского текста на английский язык с применением различных стилей (нейтральный, официальный, дружелюбный и т.д.) с использованием моделей OpenAI (например, `gpt-4o-mini`).
*   **Автоматическая вставка:** Распознанный и/или переведенный текст автоматически вставляется в активное поле ввода (например, в чат).
*   **Настраиваемые параметры:** Простой графический интерфейс на `tkinter` для настройки STT-модели, модели стиля, профиля стиля, режима вывода и API-ключа OpenAI.
*   **Поддержка Windows:** Использует WinAPI для глобальных горячих клавиш и управления фокусом окон.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/ai4bordon/ru2en.git
    cd ru2en-transcriber
    ```
    (Примечание: замените `your-username` на актуальное имя пользователя GitHub, когда репозиторий будет создан.)

2.  **Создайте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv venv
    # Для Windows
    .\venv\Scripts\activate
    # Для macOS/Linux
    source venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
    (Примечание: файл `requirements.txt` будет создан на следующем шаге.)

## Использование

1.  **Получите API-ключ OpenAI:**
    Если у вас нет ключа, получите его на [платформе OpenAI](https://platform.openai.com/account/api-keys).

2.  **Запустите скрипт:**
    ```bash
    python ru2en.py
    ```
    Откроется небольшое окно с настройками.

3.  **Настройте параметры:**
    *   **OpenAI API ключ:** Вставьте ваш API-ключ OpenAI в соответствующее поле.
    *   **Режим вывода:** Выберите "Английский (перевод и стиль)" для перевода и стилизации или "Русский (без перевода)" для чистого распознавания.
    *   **STT-модель:** Выберите модель для распознавания речи (например, `gpt-4o-mini-transcribe`).
    *   **Модель стиля (для EN):** Выберите модель для стилизации английского текста (например, `gpt-4o-mini`).
    *   **Профиль стиля (для EN):** Выберите желаемый стиль (например, "нейтральный", "официальный").
    *   Нажмите "Сохранить настройки". Настройки будут сохранены в файле `ru2en.json` в вашей домашней директории.

4.  **Используйте горячую клавишу:**
    *   Откройте любое приложение (например, мессенджер, текстовый редактор) и установите курсор в поле ввода.
    *   Нажмите **Ctrl+Shift+R** — начнется запись вашей речи.
    *   Говорите по-русски.
    *   Снова нажмите **Ctrl+Shift+R** — запись остановится, речь будет распознана, обработана (переведена/стилизована, если выбрано) и автоматически вставлена в активное поле.

    *Примечание:* Некоторые приложения могут блокировать автоматическую вставку. В таком случае, текст будет скопирован в буфер обмена, и вы сможете вставить его вручную с помощью Ctrl+V.

## Зависимости

Скрипт использует следующие библиотеки:
*   `numpy`
*   `sounddevice`
*   `soundfile`
*   `pyperclip`
*   `pynput`
*   `openai`
*   `tkinter` (встроен в Python)
*   `pywin32` (только для Windows)

Для удобства, создайте файл `requirements.txt` со следующим содержимым:

```
numpy
sounddevice
soundfile
pyperclip
pynput
openai
pywin32; platform_system == "Windows"
```

## Конфигурация

Настройки сохраняются в файле `ru2en.json` в вашей домашней директории. Вы можете отредактировать его вручную, но рекомендуется использовать графический интерфейс.

Пример `ru2en.json`:
```json
{
  "stt_model": "gpt-4o-mini-transcribe",
  "output_mode": "english",
  "style_model": "gpt-4o-mini",
  "style_profile": "нейтральный",
  "auto_paste": true,
  "global_hotkey_enabled": true,
  "openai_api_key": "ВАШ_API_КЛЮЧ",
  "sample_rate": 16000,
  "channels": 1,
  "dtype": "int16"
}
```

## Лицензия

[Укажите здесь информацию о лицензии, если применимо. Например, MIT License.]